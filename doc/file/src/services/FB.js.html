<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/services/FB.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/nolimits4web/Framework7-Vue-Webpack-Template" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/services/FB.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">export default {
  profile: {},
  friends: [],
  init(callback) {
    let vm = this;

    (function(d, s, id) {
      var js
      var fjs = d.getElementsByTagName(s)[0]
      if (d.getElementById(id)) return
      js = d.createElement(s);
      js.id = id
      js.src = &apos;//connect.facebook.net/en_US/sdk.js&apos;
      fjs.parentNode.insertBefore(js, fjs)
    }(document, &apos;script&apos;, &apos;facebook-jssdk&apos;))

    window.fbAsyncInit = () =&gt; {
      FB.init({
        appId: &apos;553330161412370&apos;,
        xfbml: true,
        version: &apos;v2.0&apos;,
        status: true,
        cookie: true,
        oauth: true
      });
      FB.getLoginStatus(function(response) {
        callback(response);
      })
    }
  },
  getProfile(callback) {
    var self = this;
    if (Object.keys(self.profile).length &gt; 0) {
      callback(self.profile);
    } else {
      FB.api(&apos;/me&apos;, function(response) {
        self.profile = response;
        callback(response);
      })
    }
  },
  getFriends: function(callback) {
    var self = this;
    if (self.friends.length &gt; 0) {
      callback(self.friends);
    } else {
      FB.api(&apos;/me/taggable_friends?fields=id,name,picture.type(large)&apos;, function(response) {
        self.friends = response.data;
        callback(response.data);
      })
    }
  },
  login(callback) {
    FB.login(function(response) {
      callback(response);
    }, {
      scope: &apos;user_friends, public_profile&apos;
    })
  },
  logout(callback) {
    FB.logout(function(response) {
      callback(response);
    })
  },
  getFriendsAndAccountDetails(callback) {
    var self = this;
    if (Object.keys(self.profile).length &gt; 0 &amp;&amp; self.friends.length &gt; 0) {
      callback(self.profile, self.friends);
    } else {
      self.init(function(response) {
        if (response.status === &apos;connected&apos;) {
          self.onLoginSuccess(callback);
        } else if (response.status === &apos;not_authorized&apos;) {
          self.login(function() {
            self.onLoginSuccess(callback);
          });
        } else {
          console.log(&quot;other login error&quot;);
        }
      });
    }
  },
  onLoginSuccess(callback) {
    let self = this;
    if (Object.keys(self.profile).length &gt; 0) {
      self.onProfileSuccess(self.profile, callback);
    } else {
      self.getProfile(function(profile) {
        self.profile = profile;
        self.onProfileSuccess(profile, callback);
      });
    }
  },
  onProfileSuccess(profile, callback) {
    let self = this;
    if (self.friends.length &gt; 0) {
      callback(profile, self.friends);
    } else {
      self.getFriends(function(friends) {
        self.friends = friends;
        callback(profile, friends);
      });
    }
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
